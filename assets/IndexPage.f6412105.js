import{c as g,h as w,g as B,i as D,q as d,s as E,u as Q,Q as L,d as k,R as F,_ as x,y as i,S as l,f as m,A as C,B as M,C as r,r as v,U as P,V as N,w as V,N as H,W as R,X as $,F as A,Y as z,D as I,x as q,z as W}from"./index.c05f12c8.js";import{c as T,h as b,Q as K}from"./QBtn.de098f6b.js";import{fetchDataFromApi as U}from"./axios.6e2c4f3e.js";const j={dark:{type:Boolean,default:null}};function X(e,s){return g(()=>e.dark===null?s.dark.isActive:e.dark)}var Y=T({name:"QCard",props:{...j,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:s}){const{proxy:{$q:a}}=B(),t=X(e,a),c=g(()=>"q-card"+(t.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>w(e.tag,{class:c.value},b(s.default))}}),G=T({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:s}){const{proxy:{$q:a}}=B(),t=D(E,d);if(t===d)return console.error("QPage needs to be a deep child of QLayout"),d;if(D(Q,d)===d)return console.error("QPage needs to be child of QPageContainer"),d;const u=g(()=>{const o=(t.header.space===!0?t.header.size:0)+(t.footer.space===!0?t.footer.size:0);if(typeof e.styleFn=="function"){const _=t.isContainer.value===!0?t.containerHeight.value:a.screen.height;return e.styleFn(o,_)}return{minHeight:t.isContainer.value===!0?t.containerHeight.value-o+"px":a.screen.height===0?o!==0?`calc(100vh - ${o}px)`:"100vh":a.screen.height-o+"px"}}),n=g(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>w("main",{class:n.value,style:u.value},b(s.default))}});const S=L("api",{state:()=>({data:null}),actions:{async fetchData(){if(!this.data)try{this.data=await U()}catch(e){console.error("Error fetching data:",e)}return this.data}}}),J=k({name:"EssentialLink",setup(){const e=S();return F(async()=>{if(e.data)alert("use data from pinia");else try{await e.fetchData()}catch(a){console.error("Error occur when onBeforeMount in EssentialLink.vue:",a)}}),{apiStore:e,refreshData:()=>{if(e.data=null,!e.data)try{e.fetchData()}catch(a){console.error("Error occur when calling refreshData in EssentialLink.vue:",a)}alert("\u8CC7\u6599\u5DF2\u5237\u65B0")}}}}),O=r("label",{class:"text-h6 q-mr-md"},"\u8CC7\u6599\u8F09\u5165\u5143\u4EF6",-1);function Z(e,s,a,t,c,u){return i(),l("div",null,[O,m(K,{color:"primary",onClick:e.refreshData},{default:C(()=>[M("Refresh Data")]),_:1},8,["onClick"])])}var ee=x(J,[["render",Z]]);const te=k({name:"SearchComponet",setup(){const e=v(""),s=v([]),a=S(),t=v(a.data);P(()=>{t.value=a.data||[]});const c=(h,y)=>{const p=new RegExp(h,"gi");return y.filter(f=>f.city.match(p)||f.state.match(p))},u=h=>h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),n=(h,y)=>{const p=new RegExp(y,"gi");return h.replace(p,f=>`<span class="hl">${f}</span>`)},_=N(()=>{s.value=c(e.value,t.value)},500);return V(e,_),{apiStore:a,searchTerm:e,suggestions:s,cities:t,numberWithCommas:u,highlightText:n}}}),ae=r("label",{class:"text-h6"},"\u641C\u5C0B\u5143\u4EF6",-1),se={class:"search-form"},ne={key:0,class:"suggestions"},re=r("li",null,"Filter for a city",-1),oe=r("li",null,"or a state",-1),ie=[re,oe],ce={key:1,class:"suggestions"},le={key:0},ue=["innerHTML"],de={class:"population"};function he(e,s,a,t,c,u){return i(),l("div",null,[ae,r("form",se,[H(r("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>e.searchTerm=n),type:"text",class:"search",placeholder:"City or State"},null,512),[[R,e.searchTerm]]),e.searchTerm===""?(i(),l("ul",ne,ie)):$("",!0),e.searchTerm!==""?(i(),l("ul",ce,[e.suggestions.length===0?(i(),l("li",le,"No matches found")):$("",!0),(i(!0),l(A,null,z(e.suggestions,n=>(i(),l("li",{key:n.id},[r("span",{class:"name",innerHTML:e.highlightText(n.city,e.searchTerm)+", "+e.highlightText(n.state,e.searchTerm)},null,8,ue),r("span",de,I(e.numberWithCommas(n.population)),1)]))),128))])):$("",!0)])])}var pe=x(te,[["render",he]]);const fe=k({name:"IndexPage",components:{EssentialLink:ee,SearchComponent:pe},setup(){return{apiStore:S()}}}),me={style:{width:"100%","margin-bottom":"100px","margin-left":"30%"}},ge={style:{width:"50%","margin-left":"30%"}};function _e(e,s,a,t,c,u){const n=q("EssentialLink"),o=q("SearchComponent");return i(),W(G,{class:"flex flex-center"},{default:C(()=>[m(Y,{style:{width:"60%"}},{default:C(()=>[r("div",me,[m(n)]),r("div",ge,[m(o)])]),_:1})]),_:1})}var Ce=x(fe,[["render",_e]]);export{Ce as default};
